import{r as ue,c as U,a as o,j as e,A as W,m as f,M as de,L as fe,b as Ne,u as se,d as A,e as le,V as M,f as I,g as he,h as pe,t as be,i as xe,R as ye}from"./index-BELNGNtz.js";import{A as je,B as X,a as ge}from"./AiChat-gIbkg9gP.js";import{X as _,f as ve}from"./util-sjr1NwLw.js";import{C as Ce}from"./check-CsOAmJ7d.js";import{L as re}from"./List-DelAD0_v.js";import{S as ce}from"./send-DV4FtCEz.js";import{s as De}from"./style.constant-BOmyPDgc.js";import"./loader-circle-BV5QKmeq.js";var Ee=ue();/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],He=U("clock",Ve);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],we=U("image",Se);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Me=U("search",ke);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Pe=U("user-check",Le);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],B=U("user-plus",_e);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],w=U("users",Ue),R=43200,Q=1440,J=Symbol.for("constructDateFrom");function O(t,n){return typeof t=="function"?t(n):t&&typeof t=="object"&&J in t?t[J](n):t instanceof Date?new t.constructor(n):new Date(n)}function L(t,n){return O(t,t)}let Te={};function Ge(){return Te}function K(t){const n=L(t),a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),+t-+a}function Y(t,...n){const a=O.bind(null,t||n.find(i=>typeof i=="object"));return n.map(a)}function q(t,n){const a=+L(t)-+L(n);return a<0?-1:a>0?1:a}function Ae(t){return O(t,Date.now())}function Ie(t,n,a){const[i,s]=Y(a==null?void 0:a.in,t,n),c=i.getFullYear()-s.getFullYear(),l=i.getMonth()-s.getMonth();return c*12+l}function ze(t){return n=>{const i=(t?Math[t]:Math.trunc)(n);return i===0?0:i}}function Re(t,n){return+L(t)-+L(n)}function Fe(t,n){const a=L(t);return a.setHours(23,59,59,999),a}function qe(t,n){const a=L(t),i=a.getMonth();return a.setFullYear(a.getFullYear(),i+1,0),a.setHours(23,59,59,999),a}function We(t,n){const a=L(t);return+Fe(a)==+qe(a)}function Be(t,n,a){const[i,s,c]=Y(a==null?void 0:a.in,t,t,n),l=q(s,c),r=Math.abs(Ie(s,c));if(r<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*r);let h=q(s,c)===-l;We(i)&&r===1&&q(i,c)===1&&(h=!1);const m=l*(r-+h);return m===0?0:m}function $e(t,n,a){const i=Re(t,n)/1e3;return ze(a==null?void 0:a.roundingMethod)(i)}const Oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ye=(t,n,a)=>{let i;const s=Oe[t];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+i:i+" ago":i};function $(t){return(n={})=>{const a=n.width?String(n.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const Xe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Je={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ke={date:$({formats:Xe,defaultWidth:"full"}),time:$({formats:Qe,defaultWidth:"full"}),dateTime:$({formats:Je,defaultWidth:"full"})},Ze={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},en=(t,n,a,i)=>Ze[t];function T(t){return(n,a)=>{const i=a!=null&&a.context?String(a.context):"standalone";let s;if(i==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,r=a!=null&&a.width?String(a.width):l;s=t.formattingValues[r]||t.formattingValues[l]}else{const l=t.defaultWidth,r=a!=null&&a.width?String(a.width):t.defaultWidth;s=t.values[r]||t.values[l]}const c=t.argumentCallback?t.argumentCallback(n):n;return s[c]}}const nn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},an={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ln={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cn=(t,n)=>{const a=Number(t),i=a%100;if(i>20||i<10)switch(i%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},mn={ordinalNumber:cn,era:T({values:nn,defaultWidth:"wide"}),quarter:T({values:tn,defaultWidth:"wide",argumentCallback:t=>t-1}),month:T({values:an,defaultWidth:"wide"}),day:T({values:sn,defaultWidth:"wide"}),dayPeriod:T({values:ln,defaultWidth:"wide",formattingValues:rn,defaultFormattingWidth:"wide"})};function G(t){return(n,a={})=>{const i=a.width,s=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],c=n.match(s);if(!c)return null;const l=c[0],r=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(r)?un(r,N=>N.test(l)):on(r,N=>N.test(l));let m;m=t.valueCallback?t.valueCallback(h):h,m=a.valueCallback?a.valueCallback(m):m;const y=n.slice(l.length);return{value:m,rest:y}}}function on(t,n){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&n(t[a]))return a}function un(t,n){for(let a=0;a<t.length;a++)if(n(t[a]))return a}function dn(t){return(n,a={})=>{const i=n.match(t.matchPattern);if(!i)return null;const s=i[0],c=n.match(t.parsePattern);if(!c)return null;let l=t.valueCallback?t.valueCallback(c[0]):c[0];l=a.valueCallback?a.valueCallback(l):l;const r=n.slice(s.length);return{value:l,rest:r}}}const fn=/^(\d+)(th|st|nd|rd)?/i,Nn=/\d+/i,hn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pn={any:[/^b/i,/^(a|c)/i]},bn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xn={any:[/1/i,/2/i,/3/i,/4/i]},yn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},En={ordinalNumber:dn({matchPattern:fn,parsePattern:Nn,valueCallback:t=>parseInt(t,10)}),era:G({matchPatterns:hn,defaultMatchWidth:"wide",parsePatterns:pn,defaultParseWidth:"any"}),quarter:G({matchPatterns:bn,defaultMatchWidth:"wide",parsePatterns:xn,defaultParseWidth:"any",valueCallback:t=>t+1}),month:G({matchPatterns:yn,defaultMatchWidth:"wide",parsePatterns:jn,defaultParseWidth:"any"}),day:G({matchPatterns:gn,defaultMatchWidth:"wide",parsePatterns:vn,defaultParseWidth:"any"}),dayPeriod:G({matchPatterns:Cn,defaultMatchWidth:"any",parsePatterns:Dn,defaultParseWidth:"any"})},Vn={code:"en-US",formatDistance:Ye,formatLong:Ke,formatRelative:en,localize:mn,match:En,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Hn(t,n,a){const i=Ge(),s=(a==null?void 0:a.locale)??i.locale??Vn,c=2520,l=q(t,n);if(isNaN(l))throw new RangeError("Invalid time value");const r=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:l}),[h,m]=Y(a==null?void 0:a.in,...l>0?[n,t]:[t,n]),y=$e(m,h),N=(K(m)-K(h))/1e3,x=Math.round((y-N)/60);let u;if(x<2)return a!=null&&a.includeSeconds?y<5?s.formatDistance("lessThanXSeconds",5,r):y<10?s.formatDistance("lessThanXSeconds",10,r):y<20?s.formatDistance("lessThanXSeconds",20,r):y<40?s.formatDistance("halfAMinute",0,r):y<60?s.formatDistance("lessThanXMinutes",1,r):s.formatDistance("xMinutes",1,r):x===0?s.formatDistance("lessThanXMinutes",1,r):s.formatDistance("xMinutes",x,r);if(x<45)return s.formatDistance("xMinutes",x,r);if(x<90)return s.formatDistance("aboutXHours",1,r);if(x<Q){const p=Math.round(x/60);return s.formatDistance("aboutXHours",p,r)}else{if(x<c)return s.formatDistance("xDays",1,r);if(x<R){const p=Math.round(x/Q);return s.formatDistance("xDays",p,r)}else if(x<R*2)return u=Math.round(x/R),s.formatDistance("aboutXMonths",u,r)}if(u=Be(m,h),u<12){const p=Math.round(x/R);return s.formatDistance("xMonths",p,r)}else{const p=u%12,D=Math.trunc(u/12);return p<3?s.formatDistance("aboutXYears",D,r):p<9?s.formatDistance("overXYears",D,r):s.formatDistance("almostXYears",D+1,r)}}function me(t,n){return Hn(t,Ae(t),n)}function k(t,n=!1){if(t==null)return n?"0 friends":"0";if(t===1&&n)return"1 friend";let a;return t<1e3?a=t.toString():t<1e6?a=(t/1e3).toFixed(t%1e3===0?0:1)+"K":t<1e9?a=(t/1e6).toFixed(t%1e6===0?0:1)+"M":a=(t/1e9).toFixed(t%1e9===0?0:1)+"B",a=a.replace(".0",""),n?`${a} friends`:a}const Sn=o.memo(()=>{const t=Array(8).fill(null);return e.jsxDEV("div",{className:"h-full overflow-hidden",children:e.jsxDEV("aside",{className:"h-full w-full flex flex-col transition-all duration-200 overflow-hidden",children:[e.jsxDEV("div",{className:"border-b border-base-300 w-full p-5",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(w,{className:"w-6 h-6"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:14,columnNumber:11},void 0),e.jsxDEV("span",{className:"font-medium hidden lg:block",children:"Contacts"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:15,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:13,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:12,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto w-full py-3 pb-0",children:t.map((n,a)=>e.jsxDEV("div",{className:"w-full p-3 flex items-center gap-3",children:[e.jsxDEV("div",{className:"relative lg:mx-0",children:e.jsxDEV("div",{className:"skeleton size-12 rounded-full"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:25,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:24,columnNumber:13},void 0),e.jsxDEV("div",{className:"block text-left min-w-0 flex-1",children:[e.jsxDEV("div",{className:"skeleton h-4 w-32 mb-2"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:30,columnNumber:15},void 0),e.jsxDEV("div",{className:"skeleton h-3 w-16"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:31,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:29,columnNumber:13},void 0)]},a,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:22,columnNumber:11},void 0))},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:20,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:10,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/SidebarSkeleton.jsx",lineNumber:9,columnNumber:5},void 0)}),wn=({isOpen:t,onClose:n})=>{const a=o.useRef(null);return o.useEffect(()=>{const i=s=>{s.key==="Escape"&&t&&n()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t,n]),o.useEffect(()=>{const i=s=>{a.current&&!a.current.contains(s.target)&&n()};return t&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[t,n]),Ee.createPortal(e.jsxDEV(W,{children:t&&e.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxDEV(f.div,{ref:a,className:"bg-base-100 rounded-lg shadow-xl w-full max-w-md h-[80vh] overflow-hidden",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},children:e.jsxDEV(je,{onClose:n},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/AiChatModal.jsx",lineNumber:51,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/AiChatModal.jsx",lineNumber:43,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/AiChatModal.jsx",lineNumber:42,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/AiChatModal.jsx",lineNumber:40,columnNumber:5},void 0),document.body)},kn=()=>{const[t,n]=o.useState(!1),a=()=>n(!0),i=()=>n(!1);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f.button,{className:"w-full p-3 mb-2 flex items-center gap-3 bg-primary/10 hover:bg-primary/20 text-primary transition-all rounded-md",onClick:a,whileHover:{x:4},whileTap:{scale:.98},children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"size-10 lg:size-12 rounded-full bg-primary/20 flex items-center justify-center",children:e.jsxDEV(X,{size:24,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:24,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:23,columnNumber:11},void 0),e.jsxDEV("span",{className:"absolute bottom-0 right-0 size-3 bg-primary rounded-full ring-2 ring-base-100 animate-pulse"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:26,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:22,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex flex-col text-left min-w-0 flex-1",children:[e.jsxDEV("div",{className:"font-medium truncate flex items-center gap-1",children:"Chitty Agent"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:30,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-xs text-primary/80 h-4 flex items-center",children:"Automate chats"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:33,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:29,columnNumber:9},void 0),e.jsxDEV("div",{className:"hidden lg:flex items-center gap-2",children:[e.jsxDEV("button",{className:"flex items-center justify-center size-8 bg-primary/20 rounded-full hover:bg-primary/30 transition-colors",title:"Quick chat",onClick:s=>{s.stopPropagation(),a()},children:e.jsxDEV(de,{size:16,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:47,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:39,columnNumber:11},void 0),e.jsxDEV(fe,{to:Ne.href,className:"flex items-center justify-center size-8 bg-primary/20 rounded-full hover:bg-primary/30 transition-colors",title:"Full AI chat page",onClick:s=>s.stopPropagation(),children:e.jsxDEV(X,{size:16,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:56,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:50,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:38,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:16,columnNumber:7},void 0),e.jsxDEV(wn,{isOpen:t,onClose:i},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:61,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SidebarAiChat.jsx",lineNumber:15,columnNumber:5},void 0)},Mn=({onClose:t})=>{const[n,a]=o.useState([]),[i,s]=o.useState(""),c=se(),{data:l,isLoading:r}=A({keys:["chatUsers"],path:"/chats"}),{mutate:h,isLoading:m}=le({keys:["chats"],path:"/chats/group",method:"POST",message:"Group chat created successfully!",onSuccess:()=>{c.invalidateQueries(["chats"]),c.refetchQueries(["chats"]),t()},onError:u=>{var p,D;console.error("Error creating group chat:",u),M.error(((D=(p=u==null?void 0:u.response)==null?void 0:p.data)==null?void 0:D.message)||"Failed to create group chat")}}),y=l?[...new Map(l.flatMap(u=>u.participants.map(p=>[p._id,p]))).values()]:[],N=u=>{if(u.preventDefault(),n.length<2){M.error("Please select at least 2 users for a group chat");return}if(!i.trim()){M.error("Please enter a group name");return}const p={name:i,participants:n.map(D=>D._id)};h(p)},x=u=>{n.some(p=>p._id===u._id)?a(n.filter(p=>p._id!==u._id)):a([...n,u])};return e.jsxDEV("div",{className:"overflow-hidden",children:e.jsxDEV(f.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:e.jsxDEV(f.div,{className:"bg-base-100 rounded-lg shadow-xl w-full max-w-md",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{duration:.2},onClick:u=>u.stopPropagation(),children:[e.jsxDEV("div",{className:"p-4 border-b border-base-300 flex justify-between items-center",children:[e.jsxDEV("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsxDEV(w,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:94,columnNumber:15},void 0),"Create Group Chat"]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:93,columnNumber:13},void 0),e.jsxDEV("button",{className:"btn btn-sm btn-ghost btn-circle",onClick:t,children:e.jsxDEV(_,{className:"w-5 h-5"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:101,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:97,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:92,columnNumber:11},void 0),e.jsxDEV("form",{onSubmit:N,className:"p-4",children:[e.jsxDEV("div",{className:"form-control mb-4",children:[e.jsxDEV("label",{className:"label",children:e.jsxDEV("span",{className:"label-text",children:"Group Name"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:108,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:107,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",className:"input input-bordered w-full",placeholder:"Enter group name",value:i,onChange:u=>s(u.target.value),required:!0},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:110,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:106,columnNumber:13},void 0),e.jsxDEV("div",{className:"form-control mb-4",children:[e.jsxDEV("label",{className:"label",children:e.jsxDEV("span",{className:"label-text",children:"Select Users (min 2)"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:122,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:121,columnNumber:15},void 0),n.length>0&&e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-3",children:n.map(u=>e.jsxDEV("div",{className:"badge badge-primary gap-1",children:[u.username,e.jsxDEV("button",{type:"button",onClick:()=>x(u),children:e.jsxDEV(_,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:137,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:133,columnNumber:23},void 0)]},u._id,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:128,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:126,columnNumber:17},void 0),e.jsxDEV("div",{className:"bg-base-200 rounded-lg max-h-60 overflow-y-auto",children:r?e.jsxDEV("div",{className:"flex justify-center items-center p-4",children:e.jsxDEV("span",{className:"loading loading-spinner loading-md"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:147,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:146,columnNumber:19},void 0):y.length===0?e.jsxDEV("div",{className:"p-4 text-center text-base-content/70",children:"No users found. Start chatting with someone first!"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:150,columnNumber:19},void 0):y.map(u=>e.jsxDEV(f.div,{className:`flex items-center gap-3 p-3 hover:bg-base-300 cursor-pointer ${n.some(p=>p._id===u._id)?"bg-base-300":""}`,onClick:()=>x(u),whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsxDEV("div",{className:"avatar",children:e.jsxDEV("div",{className:"w-10 h-10 rounded-full",children:e.jsxDEV("img",{src:u.profilePic||"/avatar.png",alt:u.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:165,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:164,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:163,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-1",children:e.jsxDEV("div",{className:"font-medium",children:u.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:169,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:168,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex-shrink-0",children:n.some(p=>p._id===u._id)?e.jsxDEV("div",{className:"bg-primary text-primary-content rounded-full p-1",children:e.jsxDEV(Ce,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:174,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:173,columnNumber:27},void 0):e.jsxDEV("div",{className:"bg-base-300 rounded-full p-1",children:e.jsxDEV(B,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:178,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:177,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:171,columnNumber:23},void 0)]},u._id,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:155,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:144,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:120,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsxDEV("button",{type:"button",className:"btn btn-ghost",onClick:t,disabled:m,children:"Cancel"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:189,columnNumber:15},void 0),e.jsxDEV("button",{type:"submit",className:"btn btn-primary",disabled:n.length<2||!i.trim()||m,children:m?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"loading loading-spinner loading-xs"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:204,columnNumber:21},void 0),"Creating..."]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:203,columnNumber:19},void 0):"Create Group"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:197,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:188,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:105,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:84,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:77,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChat.jsx",lineNumber:75,columnNumber:5},void 0)},Ln=()=>{const[t,n]=o.useState(!1);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f.button,{className:"btn btn-sm btn-primary gap-2",onClick:()=>n(!0),whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsxDEV(w,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChatButton.jsx",lineNumber:17,columnNumber:9},void 0),e.jsxDEV("span",{className:"hidden sm:inline",children:"New Group"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChatButton.jsx",lineNumber:18,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChatButton.jsx",lineNumber:11,columnNumber:7},void 0),e.jsxDEV(W,{children:t&&e.jsxDEV(Mn,{onClose:()=>n(!1)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChatButton.jsx",lineNumber:23,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChatButton.jsx",lineNumber:21,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/CreateGroupChatButton.jsx",lineNumber:10,columnNumber:5},void 0)},Pn=o.memo(({onChatSelect:t})=>{const{onlineUsers:n,subscribeToChat:a,unsubscribeFromChat:i,selectedChat:s,socket:c}=I(),l=se(),{data:r,isLoading:h}=A({keys:["chats"],path:"/chats"}),[m,y]=o.useState(!1),[N,x]=o.useState(""),[u,p]=o.useState({}),[D,P]=o.useState({});o.useEffect(()=>{if(!c)return;const d=v=>{P(C=>({...C,[v.userId]:{chatId:v.chatId,isTyping:!0}}))},j=v=>{P(C=>({...C,[v.userId]:{chatId:v.chatId,isTyping:!1}}))},g=v=>{p(C=>({...C,[v.userId]:v.timestamp}))};return c.on("userTyping",d),c.on("userStoppedTyping",j),c.on("userLastSeen",g),()=>{c.off("userTyping",d),c.off("userStoppedTyping",j),c.off("userLastSeen",g)}},[c]);const E=d=>{if(!u[d])return"Offline";try{return me(new Date(u[d]),{addSuffix:!0})}catch(j){return console.log(j),"Offline"}},V=o.useMemo(()=>e.jsxDEV(w,{className:"size-6"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:85,columnNumber:43},void 0),[]),H=o.useMemo(()=>{if(!r)return[];const d=new Map;return r.forEach(j=>{if(j.isGroupChat)return;const g=j.participants[0];if(!g)return;const v=g._id,C=d.get(v);(!C||new Date(j.createdAt)>new Date(C.createdAt))&&d.set(v,j)}),r.filter(j=>{if(j.isGroupChat)return!0;const g=j.participants[0];if(!g)return!1;const v=g._id,C=d.get(v);return C&&C._id===j._id})},[r]),b=o.useMemo(()=>H?H.filter(d=>{var j,g,v;if(m&&!d.isGroupChat&&!n.includes((j=d.participants[0])==null?void 0:j._id))return!1;if(N){const C=N.toLowerCase();return d.isGroupChat?((g=d.name)==null?void 0:g.toLowerCase().includes(C))||d.participants.some(z=>z.username.toLowerCase().includes(C)):(v=d.participants[0])==null?void 0:v.username.toLowerCase().includes(C)}return!0}):[],[H,m,n,N]);return h?e.jsxDEV(Sn,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:151,columnNumber:30},void 0):e.jsxDEV("div",{className:"h-full overflow-hidden",children:e.jsxDEV("aside",{className:"h-full w-full lg:w-72 flex flex-col transition-all duration-200 overflow-hidden flex-shrink-0",children:[e.jsxDEV("div",{className:"border-b border-base-300 w-full p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"relative",children:[V,e.jsxDEV("div",{className:"absolute -top-1 -right-1 size-4 bg-primary text-primary-content text-[10px] font-bold rounded-full flex items-center justify-center",children:(b==null?void 0:b.length)||0},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:160,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:158,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"font-medium block",children:"Chats"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:165,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-xs text-zinc-400",children:k((b==null?void 0:b.length)||0,!0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:166,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:164,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:157,columnNumber:13},void 0),e.jsxDEV(Ln,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:169,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:156,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("label",{className:"cursor-pointer flex items-center gap-2",children:[e.jsxDEV("input",{className:"checkbox checkbox-xs checkbox-primary",type:"checkbox",checked:m,onChange:d=>y(d.target.checked)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:175,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-xs",children:"Show online only"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:180,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:174,columnNumber:15},void 0),e.jsxDEV("div",{className:"badge badge-sm badge-success",children:[k(n.length-1)," online"]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:182,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:173,columnNumber:13},void 0),e.jsxDEV("div",{className:"text-xs text-zinc-500",children:new Date().toLocaleDateString()},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:184,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:172,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(B,{size:14,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:193,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-xs font-medium",children:"Friends"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:194,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:192,columnNumber:15},void 0),e.jsxDEV("div",{className:"badge badge-sm badge-primary",children:k((b==null?void 0:b.filter(d=>!d.isGroupChat).length)||0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:196,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:191,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(w,{size:14,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:199,columnNumber:15},void 0),e.jsxDEV("span",{className:"text-xs font-medium",children:"Groups"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:200,columnNumber:15},void 0),e.jsxDEV("div",{className:"badge badge-sm badge-secondary",children:k((b==null?void 0:b.filter(d=>d.isGroupChat).length)||0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:201,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:198,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:190,columnNumber:11},void 0),e.jsxDEV("div",{className:"mt-3 block",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{type:"text",placeholder:"Search chats...",className:"input input-sm input-bordered w-full pl-8",value:N,onChange:d=>x(d.target.value)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:208,columnNumber:15},void 0),e.jsxDEV("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-base-content/50",children:e.jsxDEV("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:217,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:216,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:215,columnNumber:15},void 0),N&&e.jsxDEV("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-base-content/50 hover:text-base-content",onClick:()=>x(""),children:e.jsxDEV(_,{size:14},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:225,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:221,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:207,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:206,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:155,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto w-full py-3",children:[e.jsxDEV("div",{className:"px-3 mb-3",children:e.jsxDEV(kn,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:235,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:234,columnNumber:11},void 0),e.jsxDEV("div",{className:"divider my-1 px-3",children:e.jsxDEV("span",{className:"text-xs text-base-content/50",children:"Your Chats"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:240,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:239,columnNumber:11},void 0),!b||b.length===0?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full py-6",children:[e.jsxDEV("div",{className:"text-center py-2",children:N?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("p",{className:"text-zinc-500 text-sm",children:["No results found for ",e.jsxDEV("span",{className:"font-medium text-primary",children:["'",N,"'"]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:248,columnNumber:79},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:248,columnNumber:21},void 0),e.jsxDEV("button",{className:"btn btn-xs btn-ghost mt-2",onClick:()=>x(""),children:"Clear search"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:249,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:247,columnNumber:19},void 0):e.jsxDEV("p",{className:"text-zinc-500 text-sm",children:m?"No online users":"No chats found"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:257,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:245,columnNumber:15},void 0),e.jsxDEV("div",{className:"w-16 h-16 rounded-full bg-base-300 flex items-center justify-center mx-auto mt-2",children:e.jsxDEV(w,{className:"w-8 h-8 text-zinc-500"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:263,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:262,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:244,columnNumber:13},void 0):b.map((d,j)=>{var C,z;const g=d.isGroupChat?null:d.participants[0],v=d.isGroupChat;return e.jsxDEV("div",{className:"overflow-hidden",children:e.jsxDEV(f.button,{className:`w-full p-3 mb-2 lg:mb-1 flex items-center gap-3 hover:bg-base-300 transition-all relative
                    ${(s==null?void 0:s._id)===d._id?"bg-base-300 border-l-4 border-primary":"border-l-4 border-transparent"}
                  `,initial:{opacity:0,y:"-20px"},whileInView:{opacity:1,y:0},whileHover:{x:4},whileTap:{scale:.98},transition:{delay:.05*j},onClick:()=>{i(),a(d,l),t&&t()},children:[v?e.jsxDEV("div",{className:"relative mx-auto lg:mx-0",children:[e.jsxDEV("div",{className:"flex -space-x-4 w-fit",children:d.participants.slice(0,2).map((S,oe)=>e.jsxDEV("div",{className:"w-10 h-10 lg:w-12 lg:h-12 rounded-full overflow-hidden border-2 border-transparent",children:e.jsxDEV("img",{className:"w-full h-full object-cover",src:(S==null?void 0:S.profilePic)||"/avatar.png",alt:(S==null?void 0:S.username)||`User ${oe+1}`},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:302,columnNumber:31},void 0)},S._id,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:301,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:299,columnNumber:25},void 0),e.jsxDEV("div",{className:"absolute -top-1 -right-1 bg-primary text-primary-content text-[10px] font-bold rounded-full w-5 h-5 flex items-center justify-center",children:e.jsxDEV(w,{size:12},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:312,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:311,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:297,columnNumber:23},void 0):e.jsxDEV("div",{className:"relative mx-auto lg:mx-0",children:[e.jsxDEV("img",{className:"size-10 lg:size-12 object-cover rounded-full border-2 border-transparent hover:border-primary transition-colors",src:g.profilePic||"/avatar.png",alt:g.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:317,columnNumber:25},void 0),n.includes(g._id)&&e.jsxDEV("span",{className:"absolute bottom-0 right-0 size-3 bg-green-500 rounded-full ring-2 ring-base-100"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:322,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:316,columnNumber:23},void 0),e.jsxDEV("div",{className:"flex flex-col text-left min-w-0 flex-1",children:v?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV("div",{className:"font-medium truncate",children:d.name||"Group Chat"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:331,columnNumber:29},void 0),e.jsxDEV("div",{className:"badge badge-sm badge-primary",children:d.participants.length},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:332,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:330,columnNumber:27},void 0),e.jsxDEV("div",{className:"text-xs text-zinc-400 truncate",children:[d.participants.map(S=>S.username).join(", ").substring(0,30),d.participants.map(S=>S.username).join(", ").length>30?"...":""]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:334,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:329,columnNumber:25},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"font-medium truncate flex items-center gap-1",children:[g.username,n.includes(g._id)&&e.jsxDEV("div",{className:"size-2 bg-green-500 rounded-full"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:344,columnNumber:31},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:341,columnNumber:27},void 0),e.jsxDEV("div",{className:"text-xs text-zinc-400 h-4 flex items-center",children:D&&((C=D[g._id])!=null&&C.isTyping)&&((z=D[g._id])==null?void 0:z.chatId)===d._id?e.jsxDEV("span",{className:"text-primary animate-pulse",children:"typing..."},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:350,columnNumber:31},void 0):n.includes(g._id)?"Active now":E(g._id)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:348,columnNumber:27},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:340,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:327,columnNumber:21},void 0),e.jsxDEV("div",{className:"hidden lg:block text-xs text-zinc-500 ml-auto",children:new Date(d.updatedAt||d.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:361,columnNumber:21},void 0)]},d._id,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:274,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:273,columnNumber:17},void 0)})]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:232,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:154,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/Sidebar.jsx",lineNumber:153,columnNumber:5},void 0)}),Z=o.memo(Pn),_n=o.memo(({userId:t,username:n,disabled:a=!1})=>{const[i,s]=o.useState(!1),{sendRequest:c,requests:l}=he(),r=l.sent.some(N=>N.receiver._id===t&&N.status==="pending"),h=l.received.some(N=>N.sender._id===t&&N.status==="pending"),m=l.received.some(N=>N.sender._id===t&&N.status==="accepted")||l.sent.some(N=>N.receiver._id===t&&N.status==="accepted"),y=async()=>{if(h){M.error(`You already have a pending request from ${n}`);return}if(r){M.error(`You already sent a request to ${n}`);return}if(m){M.error(`You are already connected with ${n}`);return}s(!0);try{await c(t)}finally{s(!1)}};return m?e.jsxDEV(f.button,{className:"btn btn-sm btn-outline border-0 btn-success w-full sm:w-auto",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsxDEV(f.div,{className:"md:inline hidden",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:0},children:e.jsxDEV(Pe,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:61,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:57,columnNumber:9},void 0),e.jsxDEV("span",{className:"md:hidden inline",children:"Friend"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:63,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:50,columnNumber:7},void 0):h?e.jsxDEV(f.button,{className:"btn btn-sm btn-outline border-0 w-full sm:w-auto",disabled:!1,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsxDEV(f.div,{className:"md:inline hidden",animate:{rotate:[0,360]},transition:{duration:1,repeat:0},children:e.jsxDEV(He,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:81,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:77,columnNumber:9},void 0),e.jsxDEV("span",{className:"md:hidden inline",children:"Pending request"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:83,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:70,columnNumber:7},void 0):r?e.jsxDEV(f.button,{className:"btn btn-sm btn-outline border-0 w-full sm:w-auto",disabled:!1,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsxDEV(f.div,{className:"md:inline hidden",animate:{rotate:[0,360]},transition:{duration:1,repeat:0},children:e.jsxDEV(ce,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:101,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:97,columnNumber:9},void 0),e.jsxDEV("span",{className:"md:hidden inline",children:"Request Sent"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:103,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:90,columnNumber:7},void 0):e.jsxDEV(f.button,{className:"btn btn-sm btn-primary w-full sm:w-auto",onClick:y,disabled:i||a,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},transition:{duration:.3},children:[i?e.jsxDEV("span",{className:"loading loading-spinner loading-xs"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:121,columnNumber:9},void 0):e.jsxDEV(f.div,{whileHover:{rotate:15},transition:{duration:.2},children:e.jsxDEV(pe,{className:"w-4 h-4"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:127,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:123,columnNumber:9},void 0),e.jsxDEV("span",{className:"inline md:hidden",children:"Send Request"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:130,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SendRequestButton.jsx",lineNumber:110,columnNumber:5},void 0)}),ee=o.memo(({searchTerm:t,handleSearchChange:n,clearSearch:a,placeholder:i="Search...",className:s=""})=>e.jsxDEV(f.div,{className:`relative ${s}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsxDEV(f.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.2},children:e.jsxDEV(Me,{className:"w-4 h-4 text-base-content/50"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:26,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:21,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:20,columnNumber:9},void 0),e.jsxDEV("input",{type:"text",className:"input input-bordered w-full pl-10 pr-10 py-2 text-sm",placeholder:i,value:t,onChange:n},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:29,columnNumber:9},void 0),t&&e.jsxDEV(f.button,{className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:a,"aria-label":"Clear search",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.2},children:e.jsxDEV(_,{className:"w-4 h-4 text-base-content/50 hover:text-base-content"},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:48,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:37,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:19,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/SearchBar.jsx",lineNumber:13,columnNumber:5},void 0));function Un(t,n=500){const[a,i]=o.useState(t);return o.useEffect(()=>{const s=setTimeout(()=>{i(t)},n);return()=>{clearTimeout(s)}},[t,n]),a}function Tn(t=500){const[n,a]=o.useState(""),i=Un(n,t),s=i?`?search=${i}`:"",{data:c,isLoading:l}=A({keys:["users",i],path:`/users${s}`,enabled:!0});return{searchTerm:n,users:c,isLoading:l,handleSearchChange:m=>{a(m.target.value)},clearSearch:()=>{a("")}}}const Gn=o.memo(()=>{const{searchTerm:t,users:n,isLoading:a,error:i,handleSearchChange:s,clearSearch:c}=Tn(500);return i?e.jsxDEV("div",{className:"flex flex-col items-center justify-center p-8",children:e.jsxDEV(f.p,{className:"text-error",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:"Failed to load users"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:27,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:26,columnNumber:7},void 0):a?e.jsxDEV("div",{className:"flex flex-col items-center justify-center p-8",children:e.jsxDEV(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxDEV("span",{className:"loading loading-spinner loading-lg"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:48,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:43,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:42,columnNumber:7},void 0):i?e.jsxDEV("div",{className:"flex flex-col items-center justify-center p-8",children:e.jsxDEV("p",{className:"text-error",children:"Failed to load users"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:58,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:57,columnNumber:7},void 0):!n||n.length===0?e.jsxDEV("div",{className:"p-4 w-full",children:[e.jsxDEV(f.div,{className:"flex flex-col space-y-4 mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"font-semibold",children:"Find Users to Chat With"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:74,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(B,{size:16,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:76,columnNumber:15},void 0),e.jsxDEV("span",{className:"badge badge-primary",children:"0 friends"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:77,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:75,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:73,columnNumber:11},void 0),e.jsxDEV(ee,{searchTerm:t,handleSearchChange:s,clearSearch:c,placeholder:"Search by username or email...",className:"w-full max-w-md"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:80,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:67,columnNumber:9},void 0),e.jsxDEV(f.div,{className:"flex flex-col items-center justify-center p-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxDEV(f.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.3},className:"mb-4",children:e.jsxDEV(w,{className:"w-12 h-12 text-primary/50"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:101,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:95,columnNumber:11},void 0),e.jsxDEV(f.h3,{className:"text-lg font-semibold",initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.3},children:t?"No Users Match Your Search":"No Users Found"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:103,columnNumber:11},void 0),e.jsxDEV(f.p,{className:De.subtitle,initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.3},children:t?`No users matching "${t}" were found. Try a different search term.`:"There are no other users to chat with at the moment."},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:111,columnNumber:11},void 0),e.jsxDEV(W,{children:t&&e.jsxDEV(f.button,{className:"btn btn-sm btn-outline mt-4",onClick:c,initial:{y:10,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{y:-10,opacity:0,scale:.9},whileHover:{scale:1.05},whileTap:{scale:.95},transition:{delay:.5,duration:.2},children:"Clear Search"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:123,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:121,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:89,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:66,columnNumber:7},void 0):e.jsxDEV("div",{className:"p-4 w-full",children:[e.jsxDEV(f.div,{className:"flex flex-col space-y-4 mb-4",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-xs sm:text-xl md:text-xs font-semibold",children:"Find Users to Chat With"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:151,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(B,{size:16,className:"text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:153,columnNumber:13},void 0),e.jsxDEV("span",{className:"badge badge-primary",children:k((n==null?void 0:n.length)||0,!0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:154,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:152,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:150,columnNumber:9},void 0),e.jsxDEV(ee,{searchTerm:t,handleSearchChange:s,clearSearch:c,placeholder:"Search by username or email...",className:"w-full max-w-md"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:157,columnNumber:9},void 0),e.jsxDEV(W,{children:t&&n&&n.length>0&&e.jsxDEV(f.div,{className:"text-sm text-base-content/70",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:["Found ",k(n.length,!0),' matching "',t,'"']},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:166,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:164,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:144,columnNumber:7},void 0),e.jsxDEV(f.div,{className:"space-y-3",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:e.jsxDEV(re,{data:n,getKey:l=>l._id,getItem:(l,r)=>e.jsxDEV(f.div,{className:"card bg-base-200 w-full hover:shadow-md transition-all",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r*.05},whileHover:{scale:1.02},layout:!0,children:e.jsxDEV("div",{className:"card-body p-3",children:e.jsxDEV("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxDEV("div",{className:"avatar",children:e.jsxDEV("div",{className:"w-10 h-10 rounded-full border",children:e.jsxDEV("img",{src:l.profilePic||"/avatar.png",alt:l.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:200,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:199,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:198,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[" ",e.jsxDEV("h3",{className:"font-medium truncate",children:l.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:207,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs opacity-70 truncate",children:l.email},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:208,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:206,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex-shrink-0 mt-2 sm:mt-0",children:[" ",e.jsxDEV(_n,{userId:l._id,username:l.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:211,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:210,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:197,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:196,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:188,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:184,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:178,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/UsersList.jsx",lineNumber:143,columnNumber:5},void 0)});function An(t,n,a=[]){const i=o.useRef(null),s=o.useRef(t);return o.useEffect(()=>{s.current=t},[t]),o.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[...a]),o.useCallback((...c)=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{s.current(...c)},n)},[n])}function In(t,n,a=[]){const i=o.useRef(null),s=o.useRef(0),c=o.useRef(t);return o.useEffect(()=>{c.current=t},[t]),o.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[...a]),o.useCallback((...l)=>{const r=Date.now(),h=r-s.current;h>=n?(s.current=r,c.current(...l)):(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{s.current=Date.now(),c.current(...l)},n-h))},[n])}const ne=()=>{const{hasAuthUser:t,socket:n,selectedChat:a}=I(),{mutate:i,isPending:s}=le({keys:["chats",`${a==null?void 0:a._id}`,"messages"],path:`/chats/${a==null?void 0:a._id}/messages`}),c=o.useRef(null),[l,r]=o.useState(""),[h,m]=o.useState(null),[y,N]=o.useState(!1),x=In(()=>{!n||!a||!l.trim()||(n.emit("typing",{chatId:a._id}),N(!0))},1e3,[n,a]),u=An(()=>{!n||!a||!y||(n.emit("stopTyping",{chatId:a._id}),N(!1))},2e3,[n,a,y]),p=o.useCallback(V=>{const H=V.target.value;r(H),H.trim()?(x(),u()):y&&(n==null||n.emit("stopTyping",{chatId:a==null?void 0:a._id}),N(!1))},[n,a,y,x,u]);o.useEffect(()=>()=>{n&&a&&y&&n.emit("stopTyping",{chatId:a._id})},[n,a,y]);const D=V=>{const H=V.target.files[0];if(!H.type.startsWith("image/")){M.error("Please select an image file");return}const b=new FileReader;b.onloadend=()=>{m(b.result)},b.readAsDataURL(H)},P=()=>{m(null),c.current&&(c.current.value="")},E=V=>{var d,j;if(V.preventDefault(),!l.trim()&&!h){M.error("Please enter a message or select an image.");return}y&&n&&a&&(n.emit("stopTyping",{chatId:a._id}),N(!1));const H={sender:t,chat:a._id,text:l.trim(),image:((j=(d=c.current)==null?void 0:d.files)==null?void 0:j[0])||h},b=be(H);i(b),r(""),m(null),c.current&&(c.current.value="")};return e.jsxDEV("div",{className:"p-4 w-full border-t border-base-300 h-auto",children:[h&&e.jsxDEV("div",{className:"mb-3 flex items-center gap-2",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{className:"w-20 h-20 object-cover rounded-lg border border-base-300 shadow-2xl",src:h,alt:"Preview"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:113,columnNumber:13},void 0),e.jsxDEV("button",{className:"absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-base-300 flex items-center justify-center",onClick:P,type:"button",children:e.jsxDEV(_,{className:"size-3"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:121,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:117,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:112,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:111,columnNumber:9},void 0),e.jsxDEV("form",{onSubmit:E,className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"flex-1 flex gap-2",children:[e.jsxDEV("input",{className:"w-full input input-bordered rounded-lg input-sm sm:input-md",type:"text",placeholder:"Type a message...",value:l,onChange:p},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:129,columnNumber:11},void 0),e.jsxDEV("input",{className:"hidden",type:"file",accept:"image/*",ref:c,onChange:D},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:135,columnNumber:11},void 0),e.jsxDEV("button",{className:`hidden sm:flex btn btn-circle ${h?"text-emerald-500":"text-base-content/50"}`,type:"button",onClick:()=>{var V;return(V=c.current)==null?void 0:V.click()},children:e.jsxDEV(we,{size:20},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:146,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:142,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:128,columnNumber:9},void 0),e.jsxDEV("button",{className:"btn btn-sm btn-circle bg-primary",type:"submit",disabled:!l.trim()&&!h||s,children:e.jsxDEV(ce,{size:22},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:153,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:149,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:127,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/MessageInput.jsx",lineNumber:109,columnNumber:5},void 0)},zn=()=>{const t=Array(6).fill(null);return e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:e.jsxDEV(re,{data:t,getKey:(n,a)=>a,getItem:(n,a)=>e.jsxDEV("div",{className:`chat ${a%2===0?"chat-start":"chat-end"}`,children:[e.jsxDEV("div",{className:"chat-image avatar",children:e.jsxDEV("div",{className:"size-10 rounded-full",children:e.jsxDEV("div",{className:"skeleton w-full h-full rounded-full"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:16,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:15,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:14,columnNumber:13},void 0),e.jsxDEV("div",{className:"chat-header mb-1",children:e.jsxDEV("div",{className:"skeleton h-4 w-16"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:21,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:20,columnNumber:13},void 0),e.jsxDEV("div",{className:"chat-bubble bg-transparent p-0",children:e.jsxDEV("div",{className:"skeleton h-16 w-[200px]"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:25,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:24,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:13,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:9,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/skeletons/MessageSkeleton.jsx",lineNumber:8,columnNumber:5},void 0)},te=({children:t})=>{const{selectedChat:n}=I(),{data:a}=A({keys:["authUser"],path:"/auth/check"}),{data:i,isLoading:s}=A({keys:["chats",`${n==null?void 0:n._id}`],path:`/chats/${n==null?void 0:n._id}`,enabled:!!(n!=null&&n._id)}),c=o.useRef(null);return o.useEffect(()=>{c.current&&(i!=null&&i.length)&&c.current.scrollIntoView({behavior:"smooth"})},[i==null?void 0:i.length]),s?e.jsxDEV("div",{className:"flex-1 flex flex-col h-full",children:[e.jsxDEV("div",{className:"mb-auto",children:t},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:33,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:e.jsxDEV(zn,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:37,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:36,columnNumber:9},void 0),e.jsxDEV("div",{className:"mt-auto",children:e.jsxDEV(ne,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:40,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:39,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:32,columnNumber:7},void 0):e.jsxDEV("div",{className:"flex-1 flex flex-col h-full",children:[e.jsxDEV("div",{className:"mb-auto",children:t},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:49,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:i==null?void 0:i.map((l,r)=>{var m;const h=r===i.length-1;return e.jsxDEV("section",{className:"overflow-hidden",ref:h?c:null,children:e.jsxDEV(f.div,{className:`chat ${l.sender._id===a._id?"chat-end":"chat-start"} overflow-hidden`,initial:{opacity:0,x:l.sender._id===a._id?"100%":"-100%"},whileInView:{opacity:1,x:0},children:[e.jsxDEV("div",{className:"chat-image avatar",children:e.jsxDEV("div",{className:"size-10 rounded-full border",children:e.jsxDEV("img",{src:((m=l.sender)==null?void 0:m.profilePic)||"/avtar.png",alt:"profile pic"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:76,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:75,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:74,columnNumber:17},void 0),e.jsxDEV("div",{className:"chat-header mb-1",children:[l.sender._id===a._id?"You":l.sender.username,(l==null?void 0:l.isSending)!==!0?e.jsxDEV("time",{className:"text-xs opacity-50 ml-1",children:ve(l==null?void 0:l.createdAt)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:84,columnNumber:50},void 0):e.jsxDEV("span",{children:"Sending..."},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:84,columnNumber:141},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:82,columnNumber:17},void 0),e.jsxDEV("div",{className:`chat-bubble flex flex-col ${l.sender._id===a._id&&"bg-primary text-primary-content"}`,children:[l.image&&e.jsxDEV("img",{className:"sm:max-w-[200px] rounded-md mb-2",src:l.image,alt:"Attachment"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:88,columnNumber:21},void 0),l.text&&e.jsxDEV("p",{children:l.text},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:93,columnNumber:36},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:86,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:64,columnNumber:15},void 0)},l._id||`temp-${r}`,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:59,columnNumber:13},void 0)})},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:53,columnNumber:7},void 0),e.jsxDEV("div",{className:"mt-auto",children:e.jsxDEV(ne,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:102,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:101,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatContainer.jsx",lineNumber:47,columnNumber:5},void 0)},Rn=o.memo(()=>e.jsxDEV("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 sm:p-8 md:p-16 bg-base-100/50",children:e.jsxDEV("div",{className:"max-w-md text-center space-y-6 -mt-16",children:[e.jsxDEV("div",{className:"flex justify-center mb-6",children:e.jsxDEV("div",{className:"relative",children:e.jsxDEV("div",{className:"w-20 h-20 rounded-2xl bg-primary/10 flex items-center justify-center animate-bounce",children:e.jsxDEV(xe,{className:"w-10 h-10 text-primary"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:12,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:11,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:10,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:9,columnNumber:9},void 0),e.jsxDEV("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Chatty!"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:18,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-base-content/60 text-sm sm:text-base",children:"Select a conversation from the sidebar to start chatting or find new users to connect with."},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:19,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:7,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/NoChatSelected.jsx",lineNumber:6,columnNumber:5},void 0)),ae=o.memo(({children:t,activeTab:n,onChange:a})=>e.jsxDEV("div",{className:"tabs tabs-boxed bg-transparent p-2 gap-1 w-full",children:t.map(i=>ye.cloneElement(i,{key:i.props.id,isActive:n===i.props.id,onClick:()=>a(i.props.id)}))},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/ui/Tabs.jsx",lineNumber:5,columnNumber:5},void 0)),F=o.memo(({label:t,isActive:n,onClick:a})=>e.jsxDEV("button",{className:`tab flex-1 text-sm sm:text-base ${n?"tab-active bg-primary/10 text-primary":""}`,onClick:a,children:t},void 0,!1,{fileName:"C:/placement/chatty/client/src/components/ui/Tabs.jsx",lineNumber:19,columnNumber:5},void 0)),ie=({onMobileBack:t})=>{var x,u,p,D,P;const{selectedChat:n,socket:a,unsubscribeFromChat:i,onlineUsers:s}=I(),[c,l]=o.useState(!1),[r,h]=o.useState({}),m=n!=null&&n.isGroupChat?null:(x=n==null?void 0:n.participants)==null?void 0:x[0],y=n==null?void 0:n.isGroupChat;o.useEffect(()=>{if(!a||!n||!m)return;const E=b=>{b.userId===m._id&&b.chatId===n._id&&l(!0)},V=b=>{b.userId===m._id&&b.chatId===n._id&&l(!1)},H=b=>{b.userId===m._id&&h(d=>({...d,[m._id]:b.timestamp}))};return a.on("userTyping",E),a.on("userStoppedTyping",V),a.on("userLastSeen",H),()=>{a.off("userTyping",E),a.off("userStoppedTyping",V),a.off("userLastSeen",H)}},[a,n,m]);const N=()=>{if(!m||!r[m._id])return"Offline";try{return`Last seen ${me(new Date(r[m._id]),{addSuffix:!0})}`}catch(E){return console.log(E),"Offline"}};return e.jsxDEV("div",{className:"p-2.5 border-b border-base-300",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(f.button,{className:"md:hidden btn btn-sm btn-ghost btn-circle mr-1",onClick:()=>{t&&t(),i()},whileHover:{scale:1.1},whileTap:{scale:.9,x:-5},transition:{duration:.2},children:e.jsxDEV(f.div,{initial:{x:0},whileHover:{x:-2},transition:{duration:.2},children:e.jsxDEV(ge,{size:18},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:94,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:89,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:73,columnNumber:11},void 0),y?e.jsxDEV("div",{className:"avatar-group -space-x-6",children:[(u=n==null?void 0:n.participants)==null?void 0:u.slice(0,3).map((E,V)=>e.jsxDEV("div",{className:"avatar size-10",children:e.jsxDEV("div",{className:"rounded-full ring-2 ring-white",children:e.jsxDEV("img",{className:"object-cover w-full h-full rounded-full",src:(E==null?void 0:E.profilePic)||"/avatar.png",alt:(E==null?void 0:E.username)||`User ${V+1}`},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:104,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:103,columnNumber:19},void 0)},E._id,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:102,columnNumber:17},void 0)),((p=n==null?void 0:n.participants)==null?void 0:p.length)>3&&e.jsxDEV("div",{className:"avatar size-10",children:e.jsxDEV("div",{className:"rounded-full bg-primary text-primary-content ring-2 ring-white flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xs font-medium",children:["+",n.participants.length-3]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:115,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:114,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:113,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:100,columnNumber:13},void 0):e.jsxDEV("div",{className:"avatar",children:e.jsxDEV("div",{className:"size-10 rounded-full relative",children:[e.jsxDEV("img",{src:(m==null?void 0:m.profilePic)||"/avatar.png",alt:m==null?void 0:m.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:123,columnNumber:17},void 0),m&&s.includes(m._id)&&e.jsxDEV("span",{className:"absolute bottom-0 right-0 size-3 bg-green-500 rounded-full ring-2 ring-base-100"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:125,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:122,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:121,columnNumber:13},void 0),e.jsxDEV("div",{children:y?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"font-medium flex items-center gap-2",children:[(n==null?void 0:n.name)||"Group Chat",e.jsxDEV("span",{className:"badge badge-sm badge-primary flex items-center gap-1",children:[e.jsxDEV(w,{size:12},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:138,columnNumber:21},void 0),k(((D=n==null?void 0:n.participants)==null?void 0:D.length)||0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:137,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:135,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-base-content/70",children:k(((P=n==null?void 0:n.participants)==null?void 0:P.length)||0,!0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:142,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:134,columnNumber:15},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"font-medium",children:m==null?void 0:m.username},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:148,columnNumber:17},void 0),e.jsxDEV("div",{className:"h-5 flex items-center",children:c?e.jsxDEV("p",{className:"text-sm text-primary animate-pulse",children:"typing..."},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:152,columnNumber:21},void 0):e.jsxDEV("p",{className:"text-sm text-base-content/70",children:s.includes(m==null?void 0:m._id)?"Active now":N()},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:156,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:150,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:147,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:71,columnNumber:9},void 0),e.jsxDEV(f.button,{className:"hidden md:flex btn btn-sm btn-error btn-outline gap-2",onClick:i,"aria-label":"Close chat",whileHover:{scale:1.05},whileTap:{scale:.95},transition:{duration:.2},children:[e.jsxDEV(f.div,{initial:{rotate:0},whileHover:{rotate:90},transition:{duration:.2},children:o.useMemo(()=>e.jsxDEV(_,{size:16},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:180,columnNumber:28},void 0),[])},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:175,columnNumber:11},void 0),e.jsxDEV("span",{className:"hidden lg:inline-block",children:"Close"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:182,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:167,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:70,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/ChatHeader.jsx",lineNumber:69,columnNumber:5},void 0)},Qn=()=>{const{selectedChat:t}=I(),[n,a]=o.useState("chats"),[i,s]=o.useState(!1);o.useEffect(()=>{s(!!t)},[t]);const c=()=>{s(!1)},l=o.useMemo(()=>e.jsxDEV(Rn,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:29,columnNumber:48},void 0),[]),r=o.useMemo(()=>e.jsxDEV(Gn,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:30,columnNumber:43},void 0),[]);return e.jsxDEV("main",{className:"h-[100svh] bg-base-200",children:e.jsxDEV("section",{className:"flex items-center justify-center pt-15 sm:px-4 sm:pt-20",children:e.jsxDEV("div",{className:"bg-base-100 sm:rounded-lg shadow-cl w-full max-w-6xl h-[calc(100vh-4rem)] sm:h-[calc(100vh-8rem)] shadow",children:[e.jsxDEV("div",{className:"md:hidden flex flex-col-reverse sm:flex-col h-full sm:rounded-lg overflow-hidden",children:[!i&&e.jsxDEV(ae,{activeTab:n,onChange:a,children:[e.jsxDEV(F,{id:"chats",label:"Chats"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:46,columnNumber:17},void 0),e.jsxDEV(F,{id:"users",label:"Users"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:47,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:45,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex-1 overflow-auto",children:i?e.jsxDEV(te,{children:e.jsxDEV(ie,{onMobileBack:c},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:55,columnNumber:32},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:55,columnNumber:17},void 0):n==="chats"?e.jsxDEV(Z,{onChatSelect:()=>s(!0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:59,columnNumber:19},void 0):r},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:52,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:42,columnNumber:11},void 0),e.jsxDEV("div",{className:"hidden md:flex h-full rounded-lg overflow-hidden",children:[e.jsxDEV("div",{className:"flex flex-col h-full border-r border-base-300 w-72",children:[e.jsxDEV(ae,{activeTab:n,onChange:a,children:[e.jsxDEV(F,{id:"chats",label:"Chats"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:72,columnNumber:17},void 0),e.jsxDEV(F,{id:"users",label:"Users"},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:73,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:71,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex-1 overflow-auto",children:n==="chats"?e.jsxDEV(Z,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:76,columnNumber:42},void 0):r},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:75,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:70,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1 overflow-hidden",children:t?e.jsxDEV(te,{children:e.jsxDEV(ie,{},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:80,columnNumber:72},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:80,columnNumber:57},void 0):l},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:79,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:69,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:39,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:36,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/placement/chatty/client/src/pages/Home/HomePage.jsx",lineNumber:33,columnNumber:5},void 0)};export{Qn as default};
//# sourceMappingURL=HomePage-CScWa39O.js.map
